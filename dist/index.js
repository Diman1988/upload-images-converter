(()=>{"use strict";var e={466:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.canvasesToBlobs=void 0,r.canvasesToBlobs=function(e,r){var o=[];return e.forEach((function(e){o.push(new Promise((function(o,t){e.toBlob((function(e){e&&o(e),t(new Error("Blob with error"))}),r)})))})),Promise.all(o)}},47:(e,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.canvasesToBlobs=void 0;var t=o(466);Object.defineProperty(r,"canvasesToBlobs",{enumerable:!0,get:function(){return t.canvasesToBlobs}})},607:function(e,r,o){var t=this&&this.__awaiter||function(e,r,o,t){return new(o||(o=Promise))((function(n,a){function i(e){try{c(t.next(e))}catch(e){a(e)}}function l(e){try{c(t.throw(e))}catch(e){a(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(i,l)}c((t=t.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var o,t,n,a,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,t&&(n=2&a[0]?t.return:a[0]?t.throw||((n=t.return)&&n.call(t),0):t.next)&&!(n=n.call(t,a[1])).done)return n;switch(t=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,t=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((n=(n=i.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){i.label=a[1];break}if(6===a[0]&&i.label<n[1]){i.label=n[1],n=a;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(a);break}n[2]&&i.ops.pop(),i.trys.pop();continue}a=r.call(e,i)}catch(e){a=[6,e],t=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.imageConvert=void 0;var a=o(968),i=o(47);r.imageConvert=function(e,r,o,l,c){return void 0===r&&(r=500),void 0===o&&(o=500),void 0===l&&(l="image/webp"),void 0===c&&(c=!1),t(void 0,void 0,void 0,(function(){var t,s,u,f,h;return n(this,(function(n){switch(n.label){case 0:if(!e)return[3,5];for(t=[],s=0;s<e.length;s++)(u=e.item(s))&&(f=(0,a.resizeFile)(r,o,u),t.push(f));n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.all(t).then((function(e){return(0,i.canvasesToBlobs)(e,l)})).then((function(e){for(var r=[],o=0;o<e.length;o++){var t=l.substring(l.indexOf("/")+1),n=new File([e[o]],"image_".concat(o,".").concat(t),{type:l});c&&e[o].type!==t&&console.error("converted to ".concat(e[o].type,", expected ").concat(t)),r.push(n)}return r}))];case 2:return[2,n.sent()];case 3:throw h=n.sent(),new Error("Something wrong with files, error message: ".concat(h));case 4:return[3,6];case 5:return[2,[]];case 6:return[2]}}))}))}},968:(e,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.resizeFile=void 0;var t=o(371);Object.defineProperty(r,"resizeFile",{enumerable:!0,get:function(){return t.resizeFile}})},371:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.resizeFile=void 0,r.resizeFile=function(e,r,o){return new Promise((function(t,n){var a=new Image;a.src=URL.createObjectURL(o),a.onload=function(){var o=a.width,n=a.height,i=e/o,l=r/n,c=document.createElement("canvas");c.width=e,c.height=r;var s=0,u=0,f=0,h=0,v=c.getContext("2d");if(o>n){var d=o/n;e>r?d<(p=e/r)?(f=Math.floor(o),h=Math.floor(f/p),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2)):d>p&&(f=Math.floor(n*p),h=Math.floor(n),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2)):e<r?(d<(p=r/e)||d>p)&&(f=Math.floor(n/p),h=Math.floor(n),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2)):(f=n,h=n,s=Math.floor((o-f)/2),u=Math.floor((n-h)/2)),v.drawImage(a,s,u,f,h,0,0,e,r)}else if(o<n){if(d=n/o,e>r)(d<(p=e/r)||d>p)&&(f=Math.floor(o),h=Math.floor(o/p),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2));else if(e<r){var p;d<(p=r/e)?(f=Math.floor(n/p),h=Math.floor(n),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2)):d>p&&(f=Math.floor(o),h=Math.floor(o*p),s=Math.floor((o-f)/2),u=Math.floor((n-h)/2))}else f=o,h=o,s=Math.floor((o-f)/2),u=Math.floor((n-h)/2);v.drawImage(a,s,u,f,h,0,0,e,r)}else o===n&&v.drawImage(a,0,0,e,r);v.scale(i,l),URL.revokeObjectURL(a.src),t(c)},a.onerror=function(){return n(new Error("Image load error"))}}))}}},r={};!function o(t){var n=r[t];if(void 0!==n)return n.exports;var a=r[t]={exports:{}};return e[t].call(a.exports,a,a.exports,o),a.exports}(607)})();